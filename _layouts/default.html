<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <title>{{ page.title }} | {{ site.title }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
  <meta name="format-detection" content="telephone=no">
  <meta name="theme-color" content="#50fa7b" id="theme-color-meta">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <link rel="stylesheet" href="{{ '/assets/style.css' | relative_url }}">
</head>
<body>
  <div id="controls-panel">
    <button id="theme-toggle">🌙 Toggle Theme</button>
    <div id="color-picker">
      <span class="picker-label">Headlines:</span>
      <div class="color-options">
        <div class="color-dot" data-color="default" style="background: #50fa7b;" title="Default Green"></div>
        <div class="color-dot" data-color="blue" style="background: #61dafb;" title="Cyan Blue"></div>
        <div class="color-dot" data-color="purple" style="background: #bd93f9;" title="Purple"></div>
        <div class="color-dot" data-color="orange" style="background: #ffb86c;" title="Orange"></div>
        <div class="color-dot" data-color="pink" style="background: #ff79c6;" title="Pink"></div>
        <div class="color-dot" data-color="yellow" style="background: #f1fa8c;" title="Yellow"></div>
        <div class="color-dot" data-color="red" style="background: #ff5555;" title="Red"></div>
      </div>
    </div>
  </div>
  
  <header>
    <h1>{{ site.title }}</h1>
    <p>{{ site.description }}</p>
                    <nav>
                  <a href="{{ '/' | relative_url }}">Home</a> |
                  <a href="{{ '/about' | relative_url }}">About</a> |
                  <a href="{{ '/education' | relative_url }}">Education</a> |
                  <a href="{{ '/experience' | relative_url }}">Experience</a> |
                  <a href="{{ '/research' | relative_url }}">Research</a> |
                  <a href="{{ '/teaching' | relative_url }}">Teaching</a> |
                  <a href="{{ '/projects' | relative_url }}">Projects</a> |
                  <a href="{{ '/awards' | relative_url }}">Awards</a> |
                  <a href="{{ '/interests' | relative_url }}">Interests</a> |
                  <a href="{{ '/cv' | relative_url }}">CV</a>
                </nav>
  </header>
  
  <main>
    {{ content }}
  </main>
  
  <footer>
    <div class="footer-content">
      <div class="footer-contact">
        <div class="contact-row">
          <a href="mailto:debasish.chakroborti@usask.ca" class="footer-link" title="Email">
            <span class="icon">📧</span>
            <span class="contact-text">debasish.chakroborti@usask.ca</span>
          </a>
          <a href="https://www.joydeba.com/" class="footer-link" title="Website">
            <span class="icon">🌐</span>
            <span class="contact-text">joydeba.com</span>
          </a>
        </div>
        <div class="contact-row">
          <a href="https://twitter.com/joydeba" class="footer-link" title="Twitter">
            <span class="icon">🐦</span>
            <span class="contact-text">@joydeba</span>
          </a>
          <a href="https://github.com/joydeba" class="footer-link" title="GitHub">
            <span class="icon">⚡</span>
            <span class="contact-text">github.com/joydeba</span>
          </a>
        </div>
        <div class="contact-row">
          <a href="https://www.linkedin.com/in/joydeba/" class="footer-link" title="LinkedIn">
            <span class="icon">💼</span>
            <span class="contact-text">linkedin.com/in/joydeba</span>
          </a>
          <a href="https://www.stackoverflow.com/users/1797926/joydeba" class="footer-link" title="Stack Overflow">
            <span class="icon">📚</span>
            <span class="contact-text">stackoverflow.com/joydeba</span>
          </a>
        </div>
        <div class="contact-row">
          <a href="https://www.researchgate.net/profile/Debasish-Chakroborti" class="footer-link" title="ResearchGate">
            <span class="icon">🔬</span>
            <span class="contact-text">researchgate.net/Debasish-Chakroborti</span>
          </a>
        </div>
      </div>
      <div class="footer-copyright">
        <p>© {{ site.time | date: '%Y' }} {{ site.title }}</p>
      </div>
    </div>
  </footer>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const toggleBtn = document.getElementById('theme-toggle');
      const colorDots = document.querySelectorAll('.color-dot');
      
      // Theme functionality
      function setTheme(theme) {
        document.documentElement.setAttribute('data-theme', theme);
        localStorage.setItem('theme', theme);
        toggleBtn.textContent = theme === 'dark' ? '☀️ Light Mode' : '🌙 Dark Mode';
      }
      
      toggleBtn.onclick = function() {
        const current = document.documentElement.getAttribute('data-theme');
        setTheme(current === 'dark' ? 'light' : 'dark');
      };
      
        // Color functionality
  function setHeadlineColor(color) {
    document.documentElement.setAttribute('data-headline-color', color);
    localStorage.setItem('headline-color', color);

    // Update active state
    colorDots.forEach(dot => dot.classList.remove('active'));
    document.querySelector(`[data-color="${color}"]`).classList.add('active');
    
    // Update meta theme-color to match selected color
    const themeColorMeta = document.getElementById('theme-color-meta');
    const colorMap = {
      'default': '#50fa7b',
      'blue': '#61dafb',
      'purple': '#bd93f9',
      'orange': '#ffb86c',
      'pink': '#ff79c6',
      'yellow': '#f1fa8c',
      'red': '#ff5555'
    };
    if (themeColorMeta && colorMap[color]) {
      themeColorMeta.setAttribute('content', colorMap[color]);
    }
  }
      
      colorDots.forEach(dot => {
        dot.onclick = function() {
          setHeadlineColor(this.getAttribute('data-color'));
        };
      });
      
      // Initialize theme
      const savedTheme = localStorage.getItem('theme');
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      setTheme(savedTheme || (prefersDark ? 'dark' : 'light'));
      
      // Initialize color
      const savedColor = localStorage.getItem('headline-color') || 'default';
      setHeadlineColor(savedColor);
      
      // Page load animations
      setTimeout(() => {
        const animateElements = document.querySelectorAll('main > *');
        animateElements.forEach((el, index) => {
          setTimeout(() => {
            el.style.opacity = '0';
            el.style.transform = 'translateY(20px)';
            el.style.transition = 'all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
            
            setTimeout(() => {
              el.style.opacity = '1';
              el.style.transform = 'translateY(0)';
            }, 50);
          }, index * 100);
        });
      }, 100);
      
      // Smooth scroll for internal links
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute('href'));
          if (target) {
            target.scrollIntoView({
              behavior: 'smooth',
              block: 'start'
            });
          }
        });
      });
      
      // Enhanced smooth scrolling for external page navigation
      document.querySelectorAll('a[href^="/"], a[href^="./"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
          // Add a subtle fade out effect before navigation
          document.body.style.transition = 'opacity 0.2s ease-out';
          document.body.style.opacity = '0.95';
        });
      });
    });
  </script>
</body>
</html>